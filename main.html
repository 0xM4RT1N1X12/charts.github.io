<!DOCTYPE html>
<html>
<head>
    <title>Token Chart</title>
</head>
<body>
    <div id="price-chart-widget-container" style="width: 100%; height:100%">
        <script type="text/javascript">
            (function() {
                function loadWidget() {
                    var urlParams = new URLSearchParams(window.location.search);
                    var ca = urlParams.get('ca');
                    if (typeof window.createMyWidget === 'function') {
                        window.createMyWidget('price-chart-widget-container', {
                            autoSize: true,
                            chainId: 'solana',
                            pairAddress: ca,
                            defaultInterval: '30s',
                            timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone ?? 'Etc/UTC',
                            theme: 'moralis',
                            locale: 'en',
                            backgroundColor: '#071321',
                            gridColor: '#0d2035',
                            textColor: '#68738D',
                            candleUpColor: '#4CE666',
                            candleDownColor: '#E64C4C',
                            hideLeftToolbar: false,
                            hideTopToolbar: false,
                            hideBottomToolbar: false
                        });
                    } else {
                        console.error('createMyWidget function is not defined.');
                    }
                }

                if (!document.getElementById('moralis-chart-widget')) {
                    var script = document.createElement('script');
                    script.id = 'moralis-chart-widget';
                    script.src = 'https://moralis.com/static/embed/chart.js';
                    script.type = 'text/javascript';
                    script.async = true;
                    script.onload = loadWidget;
                    document.body.appendChild(script);
                } else {
                    loadWidget();
                }
            })();
        </script>
    </div>
</body>
</html>
